<!-- agenda/templates/agenda/listar_recordatorios.html -->

{% extends 'agenda/base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">üìã Lista de Recordatorios</h2>

    <div class="mb-3 text-center">
        <a href="{% url 'agenda:recordatorios_hoy' %}" class="btn btn-outline-primary m-1">Hoy</a>
        <a href="{% url 'agenda:recordatorios_proximos' %}" class="btn btn-outline-success m-1">Pr√≥ximos</a>
        <a href="{% url 'agenda:recordatorios_sin_realizar' %}" class="btn btn-outline-warning m-1">Sin realizar</a>
        <a href="{% url 'agenda:listar_recordatorios' %}" class="btn btn-outline-secondary m-1">Todas</a>
    </div>

    {% if recordatorios %}
        <div class="list-group">
            {% for rec in recordatorios %}
                <div class="list-group-item list-group-item-action flex-column align-items-start mb-2 shadow-sm rounded {% if not rec.hecho %}bg-danger-subtle{% endif %}">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">{{ rec.titulo }}</h5>
                        <small class="text-muted">{{ rec.fecha|date:"d/m/Y" }} - {{ rec.hora|time:"H:i" }}</small>
                    </div>
                    <p class="mb-1">{{ rec.descripcion }}</p>
                    <div class="mt-2 d-flex justify-content-between align-items-center">
                        <form method="post" action="{% url 'agenda:toggle_hecho' rec.id %}">
                            {% csrf_token %}
                            <button class="btn btn-sm {% if rec.hecho %}btn-success{% else %}btn-outline-danger{% endif %}" type="submit">
                                {% if rec.hecho %}‚úÖ Hecho{% else %}‚ùå Marcar como hecho{% endif %}
                            </button>
                        </form>
                        <a href="{% url 'agenda:editar_recordatorio' rec.id %}" class="btn btn-sm btn-outline-primary">Editar</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">No hay recordatorios por mostrar.</div>
    {% endif %}
</div>
{% endblock %}
