{% extends 'gestion_usu/base.html' %} {% block title %}Lista de Usuarios (TXT){% endblock %} {% block content %}
<div class="container mt-5">
    <h1>Lista de Usuarios (TXT)</h1>

    <form method="get" action="{% url 'gestion_usu:buscar_usuarios' %}" class="mb-3">
        <div class="input-group">
            <input type="text" name="q" class="form-control" placeholder="Buscar por nombre, teléfono o email..." value="{{ termino_busqueda|default:'' }}">
            <button type="submit" class="btn btn-primary"><i class="bi bi-search me-1"></i> Buscar</button>
        </div>
    </form>

    <a href="{% url 'gestion_usu:agregar_usuario' %}" class="btn btn-success mb-3">
        <i class="bi bi-plus-circle me-2"></i> Agregar Nuevo Usuario
    </a>

    {% if mensaje_error %}
    <div class="alert alert-danger">{{ mensaje_error }}</div>
    {% endif %} {% if usuarios %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Email</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for usuario in usuarios %}
            <tr>
                <td>{{ usuario.id }}</td>
                <td>{{ usuario.nombre }}</td>
                <td>{{ usuario.telefono|default:"-" }}</td>
                <td>{{ usuario.email|default:"-" }}</td>
                <td>
                    <a href="{% url 'gestion_usu:modificar_usuario' usuario.id %}" class="btn btn-sm btn-primary">
                        <i class="bi bi-pencil-fill me-2"></i> Modificar
                    </a>
                    <form method="post" action="{% url 'gestion_usu:eliminar_usuario' usuario.id %}" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">
                                <i class="bi bi-trash-fill me-2"></i> Eliminar
                            </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %} {% if termino_busqueda %}
    <p>No se encontraron usuarios con el término: <strong>"{{ termino_busqueda }}"</strong>.</p>
    {% else %}
    <p>No hay usuarios registrados.</p>
    {% endif %} {% endif %}
</div>
{% endblock %}